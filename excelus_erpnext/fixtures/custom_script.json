[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Item", 
  "modified": "2018-01-08 20:51:41.471293", 
  "name": "Item-Client", 
  "script": "frappe.ui.form.on(\"Item\", {\n\trefresh: function(frm){\n\t\tif(!cur_frm.doc.__islocal){\n\t\t\tcur_frm.add_custom_button(__('Open Item Parameters'), function () {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"excelus_erpnext.api.item_parameter_button\",\n\t\t\t\t\targs : {\"item\":cur_frm.doc.name}\n\t\t\t\t}).done((r) => {\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Excelus Item Parameters\", r.message.name);\n\t\t\t\t})\n\t\t\t\t.fail((r)=>{\n\t\t\t\t\tconsole.log(r);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n});\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "BOM", 
  "modified": "2016-11-14 20:06:41.711758", 
  "name": "BOM-Client", 
  "script": "\nfrappe.ui.form.on(\"BOM\", \"refresh\", function(frm) {\n\tfrm.add_custom_button(__('Calc PM Qty'), function(frm){\n\t\tfrappe.call({\n\t\t\tmethod: \"excelus_erpnext.api.calculate_pm_qtys\",\n\t\t\targs: { \n\t\t\t\t\"item_code\": cur_frm.doc.item, \n\t\t\t\t\"items\": cur_frm.doc.items \n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tset_qtys_per_kg(cur_frm, r.message);\n\t\t\t\trefresh_field(\"items\");\n\t\t\t}\n\t\t});\n\t});\n});\n\nfunction set_qtys_per_kg(frm, qtys) {\n\tlaminate = cur_frm.doc.items.find(function(element) { return element[\"item_code\"].startsWith(\"PM-L\") });\n\tlaminate[\"qty\"] = qtys[\"laminate_qty\"];\n\n\tcarton = cur_frm.doc.items.find(function(element) { return element[\"item_code\"].startsWith(\"PM-C\") });\n\tcarton[\"qty\"] = qtys[\"carton_qty\"];\n\n\ttape = cur_frm.doc.items.find(function(element) { return element[\"item_code\"].startsWith(\"PM-T\") });\n\ttape[\"qty\"] = qtys[\"tape_qty\"];\n}", 
  "script_type": "Client"
 }
]